<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>CreatorBook</title>
  <meta name="theme-color" content="#06060a" />
  <link rel="stylesheet" href="assets/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <span class="dot"></span>
      <span class="name">CREATORBOOK</span>
    </div>

    <nav class="nav">
      <a href="#home" data-nav="home">Home</a>
      <a href="#create" data-nav="create" class="authed">Create Project</a>
      <a href="#profile" data-nav="profile" class="authed">Profile</a>
      <button class="navBtn authed" id="btnCreditsTop" title="Credits">Credits</button>
    </nav>

    <div class="right">
  <div class="pill authed" id="creditsPill" style="display:none; cursor:pointer;" title="Credits">
    <span id="creditsBalTop">0</span>
    <span class="sep">·</span>
    <span>credits</span>
    <span class="sep">·</span>
    <button class="miniLink" id="btnBuyCredits" type="button" title="Buy credits">Buy credits</button>
</div>

  <div class="pill authed" id="whoPill" style="display:none;">
    <span id="whoName">User</span>
    <span class="sep">·</span>
    <span id="whoRole">client</span>
  </div>

  <div class="menuWrap authed" style="display:none;" id="profileMenuWrap">
    <button class="btn ghost" id="btnProfile">Menu ▾</button>
    <div class="menu" id="profileMenu" style="display:none;">
      <a href="#profile" id="menuProfile">Profile</a>
      <button class="menuBtn" id="menuSignOut">Sign out</button>
    </div>
  </div>

  <button class="btn ghost" id="btnSignIn">Get Started</button>
</div>
</header>

  <main class="wrap">

    <!-- PUBLIC HOME (no login required) -->
    <section class="page show" id="pageHome">
      <h1 class="heroTitle">Book LA creatives with tiers, credits, and a clean workflow.</h1>
      <p class="heroSub">Browse work first. Sign in only when you’re ready to book or get booked.</p>

      <div class="grid2">
        <div class="card">
          <div class="cardTitle">Explore</div>
          <div class="row">
            <select id="homeService">
              <option value="any">Any service</option>
              <option value="music_video">Music Video</option>
              <option value="photography">Photography</option>
              <option value="reels">Reels / Shorts</option>
              <option value="editing">Editing</option>
              <option value="fashion">Fashion (Rent)</option>
              <option value="producer">Producer</option>
            </select>
            <select id="homeTier">
              <option value="any">Any tier</option>
              <option value="bronze">Bronze</option>
              <option value="silver">Silver</option>
              <option value="gold">Gold</option>
              <option value="elite">Elite</option>
            </select>
            <button class="btn" id="homeRefresh">Refresh</button>
          </div>
          <div class="muted">This feed shows approved creators and their packages.</div>
        </div>

        <div class="card">
          <div class="cardTitle">How it works</div>
          <ol class="steps">
            <li>Browse creators + tiers.</li>
            <li>Sign in, choose Artist or Creator.</li>
            <li>Artists create a project → pick a creator → request a date → chat.</li>
            <li>Credits go into escrow when confirmed. Delivery → approval → rating.</li>
          </ol>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">Home Feed</div>
        <div id="feed" class="feed"></div>
        <div class="muted" id="feedEmpty" style="display:none;">No packages found. Try “Any”.</div>
      </div>
    </section>

    <!-- ROLE GATE (after login) -->
    <section class="page" id="pageRoleGate" style="display:none;">
      <h2 class="bigQ">Are you an Artist or a Creator?</h2>
      <p class="heroSub">Artists book projects. Creators get booked (approval required to appear publicly).</p>

      <div class="roleSplit">
        <button class="roleCard" id="pickArtist">
          <div class="roleTitle">Artist</div>
          <div class="roleSub">Create projects, pick tiers, book creators.</div>
        </button>
        <button class="roleCard" id="pickCreator">
          <div class="roleTitle">Creator</div>
          <div class="roleSub">Create packages (Bronze/Silver/Gold/Elite) and get booked.</div>
        </button>
      </div>

      <div class="card slim">
        <div class="muted">You can change this later in Settings. Creators must be approved by admin before they show in the public feed.</div>
      </div>
    </section>

    <!-- ARTIST DASHBOARD -->
    <section class="page authed" id="pageArtist" style="display:none;">
      <div class="pageHead">
        <div>
          <h2>Artist Dashboard</h2>
          <div class="muted">Create a project, pick a creator, request a shoot date, and track progress.</div>
        </div>
        <button class="btn" id="btnCreateProject">Create Project</button>
      </div>

      <div class="card">
        <div class="cardTitle">Your Wallet</div>
        <div class="row">
          <div class="pill big"><span id="walletBal">0</span> credits</div>
          <button class="btn ghost" id="btnBuyCredits">Buy credits (later)</button>
        </div>
        <div class="row">
          <input id="demoCredits" type="number" min="0" step="100" placeholder="Demo top-up (testing)" />
          <button class="btn" id="btnDemoCredits">Add</button>
        </div>
        <div class="muted">Stripe comes later. Demo credits are for testing right now.</div>
      </div>

      <div class="card">
        <div class="cardTitle">My Projects</div>
        <div id="artistProjects"></div>
      </div>
    </section>

    <!-- CREATOR DASHBOARD -->
    <section class="page authed" id="pageCreator" style="display:none;">
      <div class="pageHead">
        <div>
          <h2>Creator Dashboard</h2>
          <div class="muted" id="creatorApprovalNote"></div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardTitle">Your Packages</div>
          <div class="muted">You can have up to 4 packages: Bronze, Silver, Gold, Elite.</div>
          <div id="creatorPackages"></div>
        </div>

        <div class="card">
          <div class="cardTitle">Create / Update a Package</div>
          <div class="row">
            <select id="pkgService">
              <option value="music_video">Music Video</option>
              <option value="photography">Photography</option>
              <option value="reels">Reels / Shorts</option>
              <option value="editing">Editing</option>
              <option value="fashion">Fashion (Rent)</option>
              <option value="producer">Producer</option>
            </select>
            <select id="pkgTier">
              <option value="bronze">Bronze</option>
              <option value="silver">Silver</option>
              <option value="gold">Gold</option>
              <option value="elite">Elite</option>
            </select>
          </div>
          <input id="pkgTitle" placeholder="Package title (ex: Bronze Music Video)" />
          <div class="row">
            <input id="pkgPrice" type="number" min="0" step="50" placeholder="Credits price" />
            <input id="pkgDelivery" type="number" min="1" step="1" placeholder="Delivery days" />
          </div>
          <div class="row">
            <input id="pkgHours" placeholder="Hours (ex: 4 hours)" />
            <input id="pkgLocations" placeholder="Locations (ex: 1–2)" />
          </div>
          <div class="row">
            <input id="pkgRevisions" placeholder="Revisions (ex: 1 revision)" />
          </div>
          <textarea id="pkgIncludes" placeholder="Includes (ex: Shooting + basic edit + color)"></textarea>
          <textarea id="pkgAddons" placeholder="Add-ons (ex: BTS video, 5 reels, extra locations)"></textarea>
          <div class="row">
            <button class="btn" id="btnSavePkg">Save Package</button>
          </div>
          <div class="muted">Creators can build packages anytime. You won’t appear publicly until approved.</div>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">Incoming Projects</div>
        <div id="creatorProjects"></div>
      </div>
    </section>

    <!-- PROFILE (single place for projects + feed + settings) -->
    <section class="page authed" id="pageProfile" style="display:none;">
      <div class="pageHead">
        <div>
          <h2>Profile</h2>
          <div class="muted">Projects, your feed, and your settings in one spot.</div>
        </div>
        <div class="pill big" title="Credits"><span id="profileCredits">0</span> credits</div>
      </div>

      <div class="profileHero">
        <div class="avatar" id="profileAvatar">U</div>
        <div>
          <div class="profileName" id="profileName">User</div>
          <div class="profileMeta"><span id="profileRole">client</span> · <span id="profileCity">Los Angeles</span></div>
        </div>
      </div>

      <div class="tabs" role="tablist" aria-label="Profile tabs">
        <button class="tabBtn active" id="tabProjects" type="button">My Projects</button>
        <button class="tabBtn" id="tabFeed" type="button">My Feed</button>
        <button class="tabBtn" id="tabSettings" type="button">Settings</button>
      </div>

      <div class="tabPanel" id="panelProjects">
        <div class="card">
          <div class="cardTitle">My Projects</div>
          <div class="muted">All your bookings, with status + checklist.</div>
          <div id="profileProjects"></div>
        </div>
      </div>

      <div class="tabPanel" id="panelFeed" style="display:none;">
        <div class="grid2">
          <div class="card">
            <div class="cardTitle">Post</div>
            <div class="muted">For now this is demo-only (local). We can add tables later for real follows/likes.</div>
            <input id="postTitle" placeholder="Title (optional)" />
            <textarea id="postBody" placeholder="Drop a link or an update… (YouTube / IG / Vimeo links work great)"></textarea>
            <div class="row">
              <button class="btn" id="btnPost">Post</button>
              <button class="btn ghost" id="btnClearPosts">Clear</button>
            </div>
          </div>
          <div class="card">
            <div class="cardTitle">Your Posts</div>
            <div id="myFeed" class="feed"></div>
            <div class="muted" id="myFeedEmpty" style="display:none;">No posts yet.</div>
          </div>
        </div>
      </div>

      <div class="tabPanel" id="panelSettings" style="display:none;">
        <div class="card">
          <div class="cardTitle">Settings</div>
          <div class="row">
            <label class="lbl">Display name</label>
            <input id="setName2" />
          </div>
          <div class="row">
            <label class="lbl">City</label>
            <input id="setCity2" />
          </div>
          <div class="row">
            <label class="lbl">Role</label>
            <select id="setRole2">
              <option value="client">Artist (Client)</option>
              <option value="creator">Creator</option>
            </select>
          </div>
          <div class="row">
            <label class="lbl">Bio</label>
            <textarea id="setBio2"></textarea>
          </div>
          <div class="row">
            <label class="lbl">Highlight / Portfolio link</label>
            <input id="setPortfolio2" />
          </div>
          <div class="row">
            <label class="lbl">Resume link</label>
            <input id="setResume2" />
          </div>
          <div class="row">
            <button class="btn" id="btnSaveSettings2">Save</button>
          </div>
          <div class="muted">Creators must be approved to appear publicly. Artists can book anytime.</div>
        </div>
      </div>
    </section>

    <!-- CREATE PROJECT WIZARD -->
    <section class="page authed" id="pageCreateProject" style="display:none;">
      <div class="pageHead">
        <div>
          <h2>Create Project</h2>
          <div class="muted">Pick service → choose tier → pick creator → request a date → send message.</div>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <select id="projService">
            <option value="music_video">Music Video</option>
            <option value="photography">Photography</option>
            <option value="reels">Reels / Shorts</option>
            <option value="editing">Editing</option>
            <option value="fashion">Fashion (Rent)</option>
            <option value="producer">Producer</option>
          </select>
          <select id="projTier">
            <option value="bronze">Bronze</option>
            <option value="silver">Silver</option>
            <option value="gold">Gold</option>
            <option value="elite">Elite</option>
          </select>
          <button class="btn" id="btnFindCreators">Find creators</button>
        </div>
        <div class="muted">LA only for now (city filter comes next).</div>
      </div>

      <div class="card">
        <div class="cardTitle">Pick a Creator</div>
        <div id="creatorResults" class="feed"></div>
        <div class="muted" id="creatorResultsEmpty" style="display:none;">No creators for that filter yet.</div>
      </div>

      <div class="card" id="requestBox" style="display:none;">
        <div class="cardTitle">Request details</div>
        <div class="row">
          <div class="pill">Creator: <span id="chosenCreator"></span></div>
          <div class="pill">Package: <span id="chosenPackage"></span></div>
          <div class="pill">Price: <span id="chosenPrice"></span></div>
        </div>
        <div class="row">
          <input id="reqDate" type="datetime-local" />
        </div>
        <textarea id="reqMsg" placeholder="Message (ex: vibe, references, location ideas, deadlines)"></textarea>
        <div class="row">
          <button class="btn" id="btnSendRequest">Send request</button>
          <button class="btn ghost" id="btnCancelRequest">Cancel</button>
        </div>
        <div class="muted">Availability calendar comes later. For MVP we request a date/time, creator confirms in chat.</div>
      </div>
    </section>

    <!-- MY PROJECTS -->
    <section class="page authed" id="pageProjects" style="display:none;">
      <h2>My Projects</h2>
      <div class="muted">Track every project from request to final delivery.</div>
      <div id="projectsAll"></div>
    </section>

    <!-- SETTINGS -->
    <section class="page authed" id="pageSettings" style="display:none;">
      <h2>Settings</h2>
      <div class="card">
        <div class="row">
          <label class="lbl">Display name</label>
          <input id="setName" />
        </div>
        <div class="row">
          <label class="lbl">City</label>
          <input id="setCity" />
        </div>
        <div class="row">
          <label class="lbl">Role</label>
          <select id="setRole">
            <option value="client">Artist (Client)</option>
            <option value="creator">Creator</option>
          </select>
        </div>
        <div class="row">
          <label class="lbl">Bio</label>
          <textarea id="setBio"></textarea>
        </div>
        <div class="row">
          <label class="lbl">Portfolio link</label>
          <input id="setPortfolio" />
        </div>
        <div class="row">
          <label class="lbl">Resume link</label>
          <input id="setResume" />
        </div>
        <div class="row">
          <button class="btn" id="btnSaveSettings">Save</button>
        </div>
        <div class="muted">Creators must be approved to appear publicly. Artists can book anytime.</div>
      </div>
    </section>

  </main>

  <!-- AUTH MODAL -->
  <div class="modal" id="authModal" style="display:none;">
    <div class="modalCard">
      <div class="modalHead">
        <div class="modalTitle">Welcome</div>
        <button class="x" id="authClose" aria-label="Close">✕</button>
      </div>
      <div class="authMode" role="tablist" aria-label="Authentication mode">
        <button class="chip active" id="authModeLogin" type="button" role="tab" aria-selected="true">Sign in</button>
        <button class="chip" id="authModeSignup" type="button" role="tab" aria-selected="false">Create account</button>
      </div>
      <div class="muted tiny" id="authModeHelp">New here? Create an account. Already a member? Sign in.</div>


      <div class="authStack">
        <button class="btn google" id="authGoogle">
          <span class="gDot" aria-hidden="true"></span>
          Continue with Google
        </button>

        <div class="divider"><span>or</span></div>

        <label class="lbl">Email</label>
        <input id="authEmail" placeholder="you@email.com" autocomplete="email" />

        <label class="lbl">Password</label>
        <input id="authPass" type="password" placeholder="••••••••" autocomplete="current-password" />

        <div id="authRoleWrap" style="display:none; margin-top:10px;">
          <label class="lbl">I am signing up as</label>
          <select id="authRole" class="select">
            <option value="client">Artist (booking)</option>
            <option value="creator">Creator (service provider)</option>
          </select>
          <div class="muted tiny" style="margin-top:6px;">You can switch later in Profile settings.</div>
        </div>

        <div class="authRow">
          <button class="btn" id="authLogin">Log in</button>
          <button class="btn ghost" id="authSignup">Create account</button>
        </div>
        <div class="authRow" style="margin-top:10px; justify-content:space-between;">
          <button class="btn ghost small" id="authForgot" type="button">Forgot password?</button>
          <button class="btn" id="authSetNewPass" type="button" style="display:none;">Set new password</button>
        </div>


        <button class="btn ghost small" id="authMagic">Email me a magic link instead</button>

        <div class="muted tiny" id="authHint">
          Tip: If email confirmation is on, we’ll prompt you to confirm your email, then you can sign in.
        </div>
      </div>

    </div>
  </div>

  <!-- Credits Modal -->
<div class="modal" id="creditsModal" style="display:none;">
  <div class="sheet">
    <div class="modalTitle">Credits</div>
    <div class="muted" style="margin-bottom:10px;">For now this is demo top-up. Later we wire Stripe to buy credits.</div>
    <div class="row">
      <input id="demoCreditsModal" type="number" min="0" step="1" placeholder="500" />
      <button class="btn" id="btnAddDemoCreditsModal">Add</button>
    </div>
    <div class="muted" style="margin-top:10px;">Balance: <b><span id="walletBalModal">0</span></b> credits</div>
    <div class="row" style="margin-top:12px; justify-content:flex-end;">
      <button class="btn ghost" id="btnCloseCredits">Close</button>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

  <script src="assets/app.js"></script>
</body>
</html>
